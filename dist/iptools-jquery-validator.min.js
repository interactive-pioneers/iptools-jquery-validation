/*! iptools-jquery-validator - v0.0.1 - 2015-06-10
* https://github.com/interactive-pioneers/iptools-jquery-validator
* Copyright © 2015 Interactive Pioneers GmbH; Licensed GPL */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.$element=a(b),this.settings=a.extend({},g,c),this._defaults=g,this._name=f}var f="iptValidator",g={stopOnRequired:!1,errorClass:"error"};e.prototype={_isEmpty:function(a){return 0===a.replace(" ","").length},_isValidEmail:function(a){return/^([äöüÜÖÄßA-Za-z0-9_\-\.\+])+\@([äöüÜÖÄßA-Za-z0-9_\-\.])+\.([äöüÜÖÄßA-Za-z]{2,4})$/i.test(a)},_isValidPhone:function(a){return/^(\+)?([\/\d-\s]+)$/.test(a)},_isValidPostcode:function(a){return/^[\d]{5}$/.test(a)},_isValidNumeric:function(a){return/^([\d\s]+)$/.test(a)},_isValidName:function(a){return/^([^<>|%$\;:,@\"§\{\[\]\}\?\*#]+)$/.test(a)},_isValidStreet:function(a){return/^([\w\däöüÜÖÄß\s\/\&\",\.\'-]+)$/.test(a)},_isValidHouseNumber:function(a){return/^([\w\d-\/\s]+)$/.test(a)},_isUnique:function(b){for(var c,d=!0,e=b.attr("data-validation-unique-with").split(","),f=b.val(),g=[],h=0,i=e.length;i>h;h++)c="#"+e[h],f+=a(c).val(),g.push(c);var j=b.attr("data-validation-unique-set"),k=this.$element.find("input[type=text][data-validation-unique-set="+j+"]").not(b).not(g.join(" "));return k.each(function(){for(var b=a(this).attr("data-validation-unique-with").split(","),c=this._getElementValue(a(this)),e=0,g=b.length;g>e;e++)c+=a("#"+b[e]).val();c===f&&(d=!1)}),d},_getElementValue:function(b){return"true"===b.attr("data-validation-trim")?a.trim(b.val()):b.val()},_isFilled:function(a){var b=a.prop("type");return"checkbox"===b?a.prop("checked"):!this._isEmpty(a.val())},_publishError:function(b,c){a(b).addClass(this.settings.errorClass).parent().addClass(this.settings.errorClass);var d=a("<span></span>").addClass(this.settings.errorClass).text(c);a(b).parent().append(d)},_cleanErrors:function(){var a=this.$element.find("*[data-validation]");a.removeClass(this.settings.errorClass).parent().removeClass(this.settings.errorClass),a.siblings("span."+this.settings.errorClass).remove()},_shallValidate:function(b,c){if(this._isSkippable(c,b))return!1;var d=-1!==a(b).attr("data-validation").indexOf("required");return d||a(b).val()&&a(b).val().length>0},_isSkippable:function(b,c){if(a(c).attr("disabled"))return!0;var e="data-validation-skip",f="data-validation-skip-scope",g=this.$element.find("*["+e+"]:selected");if(g.length>0)for(var h,i,j,k=0,l=g.length;l>k;k++)if(j=a(g[k]),i=j.attr(f),typeof i!==d&&0!==a(c).parents("#"+i).length){h=j.attr(e).split(",");for(var m=0,n=h.length;n>m;m++)if(h[m]===b)return!0}return!1},validate:function(){var b=this;b._cleanErrors();var c,d=[];return this.$element.find("*[data-validation]:visible").each(function(){c=a(this).attr("data-validation").split(",");a:for(var e,f,g=0,h=c.length;h>g;g++)if(f=c[g],-1!==f.indexOf("password-match")&&(f="password-match"),b._shallValidate(this,f))switch(f){case"required":if(!b._isFilled(a(this))&&(e=a(this).attr("data-errormessage-required"),b._publishError(this,e),d.push({field:this,error:e}),b.settings.stopOnRequired))break a;break;case"email":b._isValidEmail(b._getElementValue(a(this)))||(e=a(this).attr("data-errormessage-email"),b._publishError(this,e),d.push({field:this,error:e}));break;case"phone":b._isValidPhone(b._getElementValue(a(this)))||(e=a(this).attr("data-errormessage-phone"),b._publishError(this,e),d.push({field:this,error:e}));break;case"postcode":b._isValidPostcode(b._getElementValue(a(this)))||(e=a(this).attr("data-errormessage-postcode"),b._publishError(this,e),d.push({field:this,error:e}));break;case"numeric":b._isValidNumeric(b._getElementValue(a(this)))||(e=a(this).attr("data-errormessage-numeric"),b._publishError(this,e),d.push({field:this,error:e}));break;case"password-match":var i=c[g].substring(c[g].indexOf("[")+1,c[g].lastIndexOf("]")),j=b.$element.find('input[name="'+i+'"]');(0===j.length||a(this).val()!==j.val())&&(e=a(this).attr("data-errormessage-password-match"),b._publishError(this,e),d.push({field:this,error:e}));break;case"name":b._isValidName(b._getElementValue(a(this)))||(e=a(this).attr("data-errormessage-name"),b._publishError(this,e),d.push({field:this,error:e}));break;case"street":b._isValidStreet(b._getElementValue(a(this)))||(e=a(this).attr("data-errormessage-street"),b._publishError(this,e),d.push({field:this,error:e}));break;case"housenumber":b._isValidHouseNumber(b._getElementValue(a(this)))||(e=a(this).attr("data-errormessage-housenumber"),b._publishError(this,e),d.push({field:this,error:e}));break;case"unique":b._isUnique(a(this))||(e=a(this).attr("data-errormessage-unique"),b._publishError(this,e),d.push({field:this,error:e}))}}),d},destroy:function(){this.$element.removeData("plugin_"+f)}},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);