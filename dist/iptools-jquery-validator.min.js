/*! iptools-jquery-validator - v0.0.1 - 2015-06-11
* https://github.com/interactive-pioneers/iptools-jquery-validator
* Copyright © 2015 Interactive Pioneers GmbH; Licensed GPL */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.$element=a(b),this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this._errors=[],this._addEventListeners()}var f="iptValidator",g={triggerOnSubmit:!0,stopOnRequired:!1,errorPublishingMode:"appendToParent",errorMsgContainerID:null,errorClass:"error"};e.prototype={_isEmpty:function(a){return 0===a.replace(" ","").length},_isFilled:function(a){var b=a.prop("type");return"checkbox"===b?a.prop("checked"):!this._isEmpty(a.val())},_isValidEmail:function(a){return/^([äöüÜÖÄßA-Za-z0-9_\-\.\+])+\@([äöüÜÖÄßA-Za-z0-9_\-\.])+\.([äöüÜÖÄßA-Za-z]{2,4})$/i.test(a)},_isValidPhone:function(a){return/^(\+)?([\/\d-\s]+)$/.test(a)},_isValidPostcode:function(a){return/^[A-Za-z0-9][A-Za-z0-9\-\s]{0,10}[A-Za-z0-9]$/i.test(a)},_isValidNumeric:function(a){return/^([\d\s]+)$/.test(a)},_isValidName:function(a){return/^([^<>|%$\;:,@\"§\{\[\]\}\?\*#]+)$/.test(a)},_isValidStreet:function(a){return/^([\w\däöüÜÖÄß\s\/\&\",\.\'-]+)$/.test(a)},_isValidHouseNumber:function(a){return/^([\w\d-\/\s]+)$/.test(a)},_isUnique:function(b){for(var c,d=!0,e=b.attr("data-validation-unique-with").split(","),f=b.val(),g=[],h=0,i=e.length;i>h;h++)c="#"+e[h],f+=a(c).val(),g.push(c);var j=b.attr("data-validation-unique-set"),k=this.$element.find("input[type=text][data-validation-unique-set="+j+"]").not(b).not(g.join(" "));return k.each(function(){for(var b=a(this).attr("data-validation-unique-with").split(","),c=this._getElementValue(a(this)),e=0,g=b.length;g>e;e++)c+=a("#"+b[e]).val();c===f&&(d=!1)}),d},_getElementValue:function(b){return"true"===b.attr("data-validation-trim")?a.trim(b.val()):b.val()},_getValidationElements:function(){return this.$element.find("*[data-validation]:visible")},_publishError:function(b,c){a(b).addClass(this.settings.errorClass).parent().addClass(this.settings.errorClass);var d=a("<span></span>").addClass(this.settings.errorClass).text(c);switch(this.settings.errorPublishingMode){case"insertIntoTarget":var e="#"+this.settings.errorMsgContainerID;e&&e.append(d);break;case"appendToParent":a(b).parent().append(d);break;case"prependToParent":a(b).parent().prepend(d);break;case"insertBeforeField":a(b).before(d);break;case"insertAfterField":a(b).after(d)}},_removeErrors:function(){var a=this._getValidationElements();a.removeClass(this.settings.errorClass).parent().removeClass(this.settings.errorClass),this.$element.find("span."+this.settings.errorClass).remove()},getErrors:function(){return this._errors},clearErrors:function(){this._errors=[]},_shallValidate:function(b,c){if(this._isSkippable(b,c))return!1;var d=a(b),e=-1!==d.attr("data-validation").indexOf("required"),f=d.val();return e||f&&f.length>0},_isSkippable:function(b,c){if(a(b).prop("disabled"))return!0;var e="data-validation-skip",f="data-validation-skip-scope",g=this.$element.find("*["+e+"]:selected");if(g.length>0)for(var h,i,j,k=0,l=g.length;l>k;k++)if(j=a(g[k]),i=j.attr(f),typeof i!==d&&0!==a(b).parents("#"+i).length){h=j.attr(e).split(",");for(var m=0,n=h.length;n>m;m++)if(h[m]===c)return!0}return!1},validateField:function(b){var c=this,d=a(b),e=c._getElementValue(d),f=d.data("validation").split(",");a:for(var g,h=0,i=f.length;i>h;h++){var j=!0;if(g=f[h],-1!==g.indexOf("password-match")&&(g="password-match[pw2]"),c._shallValidate(this,g)){switch(g){case"required":if(!c._isFilled(d)&&(j=!1,c.settings.stopOnRequired))break a;break;case"email":c._isValidEmail(e)||(j=!1);break;case"phone":c._isValidPhone(e)||(j=!1);break;case"postcode":c._isValidPostcode(e)||(j=!1);break;case"numeric":c._isValidNumeric(e)||(j=!1);break;case"name":c._isValidName(e)||(j=!1);break;case"street":c._isValidStreet(e)||(j=!1);break;case"housenumber":c._isValidHouseNumber(e)||(j=!1);break;case"password-match":var k=f[h].substring(f[h].indexOf("[")+1,f[h].lastIndexOf("]")),l=c.$element.find('input[name="'+k+'"]');(0===l.length||d.val()!==l.val())&&(j=!1);break;case"unique":c._isUnique(d)||(j=!1)}if(!j){var m=d.data("errormsg-"+g);c._publishError(b,m),c._errors.push({field:b,error:m})}}}},validate:function(){var a=this;a._clearErrors(),a._removeErrors();var b=a._getValidationElements();return b.each(function(){a._validateField(this)}),0===a._errors.length},_handleFormSubmit:function(a){var b=a.data;b.$element.validate()||a.preventDefault()},_addEventListeners:function(){var b=this;this.settings.triggerOnSubmit&&this.$element.on("submit."+this._name,null,this,this._handleFormSubmit);var c=this._getValidationElements();c.each(function(){var c=a(this);"change"===c.data("validation-trigger")&&c.on("change."+b._name,function(){b._validateField(this)})})},destroy:function(){this.$element.off("submit."+this._name);var a=this._getValidationElements();a.off("change."+this._name),this.$element.removeData("plugin_"+f)}},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);